{% extends "hr/base.html" %}

{% block title %}Edit Employee{% endblock %}

{% block page_title %}
<h1 class="text-xl font-bold">Edit Employee</h1>
{% endblock %}

{% block content %}
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="mb-4">
          {% for category, message in messages %}
            <div class="px-4 py-2 mb-2 rounded 
                {% if category == 'success' %}bg-green-100 text-green-800
                {% elif category == 'warning' %}bg-yellow-100 text-yellow-800
                {% elif category == 'error' %}bg-red-100 text-red-800
                {% else %}bg-blue-100 text-blue-800{% endif %}">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    <form action="{{ url_for('edit_employee', employee_id=employee['employee_id']) }}" method="POST">
        <div class="mb-4">
            <label for="name" class="block text-gray-700 text-sm font-bold mb-2">Full Name</label>
            <input type="text" id="name" name="name" value="{{ employee.name }}" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>
        <div class="mb-4">
            <label for="position" class="block text-gray-700 text-sm font-bold mb-2">Position</label>
            <select id="position" name="position" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <option value="" disabled>Select Position</option>
                <option value="Laboratory Technician" {% if employee.position == 'Laboratory Technician' %}selected{% endif %}>Laboratory Technician</option>
                <option value="Research Scientist" {% if employee.position == 'Research Scientist' %}selected{% endif %}>Research Scientist</option>
                <option value="Manufacturing Director" {% if employee.position == 'Manufacturing Director' %}selected{% endif %}>Manufacturing Director</option>
                <option value="Manager" {% if employee.position == 'Manager' %}selected{% endif %}>Manager</option>
                <option value="Research Director" {% if employee.position == 'Research Director' %}selected{% endif %}>Research Director</option>
                <option value="Sales Executive" {% if employee.position == 'Sales Executive' %}selected{% endif %}>Sales Executive</option>
                <option value="Healthcare Representative" {% if employee.position == 'Healthcare Representative' %}selected{% endif %}>Healthcare Representative</option>
                <option value="Sales Representative" {% if employee.position == 'Sales Representative' %}selected{% endif %}>Sales Representative</option>
            </select>
        </div>
        <div class="mb-4">
            <label for="department" class="block text-gray-700 text-sm font-bold mb-2">Department</label>
            <select id="department" name="department" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <option value="" disabled>Select Department</option>
                <option value="Research & Development" {% if employee.department == 'Research & Development' %}selected{% endif %}>Research & Development</option>
                <option value="Human Resources" {% if employee.department == 'Human Resources' %}selected{% endif %}>Human Resources</option>
                <option value="Sales" {% if employee.department == 'Sales' %}selected{% endif %}>Sales</option>
                <option value="HR" {% if employee.department == 'HR' %}selected{% endif %}>HR</option>
            </select>
        </div>
        <div class="mb-4">
            <label for="salary" class="block text-gray-700 text-sm font-bold mb-2">Salary</label>
            <input type="number" id="salary" name="salary" min="0" value="{{ employee.salary }}" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>
        <div class="mb-4">
            <label for="date_joined" class="block text-gray-700 text-sm font-bold mb-2">Date Joined</label>
            <input type="date" id="date_joined" name="date_joined" value="{{ employee.date_joined or '' }}" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>
        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Save Changes</button>
        <a href="{{ url_for('employees') }}" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2">Cancel</a>
    </form>
{% endblock %}